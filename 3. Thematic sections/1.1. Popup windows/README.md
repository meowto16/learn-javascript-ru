# Открытие окон и методы window

## Свойства:

1. Попап – это отдельное окно со своим JavaScript-окружением. 
   Так что открытие попапа со стороннего, не доверенного сайта вполне безопасно
2. Открыть попап очень просто. `window.open(url)`
3. Попап может производить навигацию (менять `URL`) и отсылать сообщения в основное окно.

## Блокировка попапов

Всплывающее окно блокируется в том случае, если вызов window.open произошёл 
не в результате действия посетителя (например, события `onclick`).

```js
// попап заблокирован
window.open('https://javascript.info');

// попап будет показан
button.onclick = () => {
  window.open('https://javascript.info');
};
```

Таким образом браузеры могут защитить пользователя 
от появления нежелательных попапов, при этом не отключая попапы полностью.

## Полный синтаксис window.open

Синтаксис открытия нового окна: `window.open(url, name, params)`:

- `url` - URL для загрузки в новом окне.
- `name` - Имя нового окна. У каждого окна есть свойство window.name, в котором можно задавать, какое окно использовать для попапа. 
  Таким образом, если уже существует окно с заданным именем – указанный в параметрах URL откроется в нем, в противном случае откроется новое окно.
- `params` - Строка параметров для нового окна. Содержит настройки, разделённые запятыми. Не должно быть пробелов.

## Доступ к попапу из основного окна

Вызов `open` возвращает ссылку на новое окно. 
Эта ссылка может быть использована для управления свойствами окна, например, изменения положения и др.

```js
let newWin = window.open("about:blank", "hello", "width=200,height=200");

newWin.document.write("Hello, world!");
```

```js
let newWindow = open('/', 'example', 'width=300,height=300')
newWindow.focus();

alert(newWindow.location.href); // (*) about:blank, загрузка ещё не началась

newWindow.onload = function() {
  let html = `<div style="font-size:30px">Добро пожаловать!</div>`;
  newWindow.document.body.insertAdjacentHTML('afterbegin', html);
};
```

## Закрытие попапа

- Чтобы закрыть окно: `win.close()`
- Для проверки, закрыто ли окно: `win.closed`.

## Полезные методы

### Прокрутка и изменение размеров

- `win.moveBy(x,y)` - Переместить окно относительно текущей позиции на x пикселей вправо и y пикселей вниз.
- `win.moveTo(x,y)` - Переместить окно на координаты экрана (x,y).
- `win.resizeBy(width,height)` - Изменить размер окна на указанные значения width/height относительно текущего размера. 
- `win.resizeTo(width,height)` - Изменить размер окна до указанных значений.

### Прокрутка окна

- `win.scrollBy(x,y)` - Прокрутить окно на x пикселей вправо и y пикселей вниз относительно текущей прокрутки.
- `win.scrollTo(x,y)` - Прокрутить окно до заданных координат (x,y).
- `elem.scrollIntoView(top = true)` - Прокрутить окно так, чтобы `elem` для `elem.scrollIntoView(false)` появился 
   вверху (по умолчанию) или внизу.

## Еще полезное:

- У попапа есть доступ к породившему его окну через свойство window.opener.
- Если основное окно и попап имеют один домен и протокол, то они свободно могут читать и изменять друг друга. 
  В противном случае, они могут только изменять положение друг друга и взаимодействовать с помощью сообщений.
- 