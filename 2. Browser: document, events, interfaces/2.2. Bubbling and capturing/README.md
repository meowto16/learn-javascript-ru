# Всплытие и погружение

Принцип всплытия очень простой.

> Когда на элементе происходит событие, обработчики сначала срабатывают на нём, потом на его родителе, 
> затем выше и так далее, вверх по цепочке предков.

Почти все события всплывают, но, например, `focus` - не всплывает.

## event.target

При наступлении события – самый глубоко вложенный элемент, на котором оно произошло, 
помечается как «целевой» (event.target).

Отличия от this (=event.currentTarget):

- event.target – это «целевой» элемент, на котором произошло событие, в процессе всплытия он неизменен.
- this – это «текущий» элемент, до которого дошло всплытие, на нём сейчас выполняется обработчик.

## Прекращение всплытия

Для этого нужно вызвать метод `event.stopPropagation()`.

- `event.stopImmediatePropagation()` - прекращает вообще все обработки, даже на текущем элементе.

## Погружение

Стандарт DOM Events описывает 3 фазы прохода события:

- Фаза погружения (capturing phase) – событие сначала идёт сверху вниз.
- Фаза цели (target phase) – событие достигло целевого(исходного) элемента.
- Фаза всплытия (bubbling stage) – событие начинает всплывать.

## Поэтапно

При наступлении события – самый глубоко вложенный элемент, на котором оно произошло, помечается как «целевой» (event.target).

- Затем событие сначала двигается вниз от корня документа к event.target, 
  по пути вызывая обработчики, поставленные через `addEventListener(...., true)`, где `true` – это сокращение для `{capture: true}`.
- Далее обработчики вызываются на целевом элементе.
- Далее событие двигается от `event.target` вверх к корню документа, по пути 
  вызывая обработчики, поставленные через` on<event>` и `addEventListener` без третьего аргумента или с 
  третьим аргументом равным `false`.
