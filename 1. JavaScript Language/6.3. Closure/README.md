# Замыкания

В JS у каждой выполняемой функции, блока кода и скрипта есть связанный с ними внутренний (скрытый)
объект, который называется *лексическое окружение* (Lexical environment)

Лексическое окружение состоит из двух частей:

- Environment record - объект, где хранятся все локальные переменные, а также другая информация типа `this`
- Ссылка на внешнее лексическое окружение

> Когда код хочет получить доступ к переменной – сначала происходит поиск во внутреннем лексическом окружении, 
> затем во внешнем, затем в следующем и так далее, до глобального.

Если переменная не была найдена, это будет ошибкой в `strict mode`. Без `strict mode`, для обратной совместимости, 
присваивание несуществующей переменной создаёт новую глобальную переменную с таким именем.

- Один вызов – одно лексическое окружение
- Лексическое окружение – это специальный внутренний объект
- Лексическое окружение существует для любых блоков кода `{...}`

## Важный момент при отладке

```js
let value = "Сюрприз!";

function f() {
  let value = "ближайшее значение";

  function g() {
    debugger; // в консоли: напишите alert(value); Сюрприз!
  }

  return g;
}

let g = f();
g();
```
