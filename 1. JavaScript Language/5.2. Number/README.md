# Числа

В современном JS существует два типа чисел:

- Обычные числа. Хранятся в формате [IEEE-754](https://en.wikipedia.org/wiki/IEEE_754-1985)
  - Это числа с плавающей точкой двойной точности
  - Для хранения числа используются 64 бита. Из них:
    - 52 бита - для хранения цифр
    - 11 битов - для хранения положения десятичной точки
    - 1 бит - для хранения знака
- `BigInt` - дают возможность работать с целыми числами произвольной длины
  - Нужны, когда надо работать со значениями больше `Number.MAX_SAFE_INTEGER` 
    или меньше `Number.MIN_SAFE_INTEGER`

## Способы записи числа

### Экспоненциальная запись

В JS можно использовать букву `e`. Это [экспоненциальная запись](https://ru.wikipedia.org/wiki/%D0%AD%D0%BA%D1%81%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%86%D0%B8%D0%B0%D0%BB%D1%8C%D0%BD%D0%B0%D1%8F_%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D1%8C)

> Еще в stage 4 proposal, есть [Numeric separators](https://github.com/tc39/proposal-numeric-separator)
> 
> Позволяет писать что-то вроде:
> `1_000_000` или `0.10_000_000_5`

```js
1e9 === 1_000_000 // 1 миллиард, буквально: 1 и 9 нулей.
1.23e6 === 1230000 // Тоже самое, что 1.23 * 1_000_000
1e-6 === 0.000001
```

### Двоичные, восьмеричные, шестнадцатеричные числа

- Шестнадцатеричные, начинаются с `0x`
  - `0xff === 255 && 0xFF === 255`
- Восьмеричные, начинаются с `0o`
  - `0o377 === 255`
- Двоичные, начинаются с `0b`
  - `0b11111111 === 255`

## toString(base)

Метод `num.toString(base)` возвращает строковое представление числа num в системе счисления base.

> base(36) - максимальное основание

## Округление

- `Math.floor` - округление в меньшую сторону
- `Math.ceil` - округление в большую сторону
- `Math.round` - округление до ближайшего целого
- `Math.trunc` - удаление дробной части, без округления (не поддерживается в IE)

`toFixed(n)` - округляет число до `n` знаков после запятой, и возвращает **строку**. Если десятичная часть короче, 
чем необходимо, то в конец будут добавлены нули.

## Неточные вычисления

Если число слишком большое, либо маленькое, оно переполнит 64-битное хранилище, JavaScript вернёт бесконечность:

```js
1e500 // Infinity
-(1e500) // -Infinity
```

Проблема потери точности:

```js
alert( 0.1 + 0.2 ); // 0.30000000000000004
```

Происходит такая вещь потому, что в двоичной системе счисления - это становится бесконечной дробью.
Например, в десятичной системе счисление - `1/3` - это тоже бесконечная дробь. 
А в двоичной `1/10` - это бесконечная дробь.

Вообще, правило простое - при работе с дробями использовать `toFixed` и численное преобразование.

## Проверка isFinite и isNaN

- `isNaN(val)` - преобразует в число и проверяет является ли оно `NaN`. `Number.isNaN` - не преобразует в число.
- `isFinite(val)` - преобразует в число и возвращает `true`, если оно является обычным числом. Не `NaN`, `Infinite`, `-Infinite`.
  - Иногда используется для проверки - содержится ли в строке число

## parseInt и parseFloat

Для преобразования значений типа 12pt и 100px в число:

- Используйте `parseInt`/`parseFloat` для «мягкого» преобразования строки в число, 
  данные функции по порядку считывают число из строки до тех пор пока не возникнет ошибка.

