# Методы объекта, this

Функция, которая является свойством объекта называют **методом**

Есть три варианта присвоения:

1. Обычный
```js
user = {
  sayHi: function() {
    alert('Привет');
  }
}
```

2. Сокращенный
```js
user = {
  sayHi() {
    alert('Привет');
  }
}
```

3. Присвоение после объявления объекта
```js
user = {
  name: 'Maxim'
}

user.sayHi = function() {
  alert('Привет')
}
```

## Ключевое слово "this" в методах

> Для доступа к информации внутри объекта метод может использовать ключевое
> слово `this`

Значение `this` - это объект "перед точкой", который использовался для вызова метода.

## Вызов без объекта: this == undefined

```js
function sayHi() {
  alert(this);
}

sayHi(); // undefined
```

- В строгом режиме - `this` вернет `undefined`. Любое обращение к свойству выбросит ошибку
- В нестрогом режиме - `this` вернет `window`. 

## Свободный `this`

В JavaScript `this` является "свободным". Т.е его значение вычисляется в момент вызова метода:

- Не зависит от того, где этот метод был объявлен
- Зависит от того, какой объект вызывает метод (какой объект "стоит перед точкой")

## Внутренняя реализация: ссылочный тип

> Для работы вызовов типа `user.hi()` , JavaScript использует трюк – точка '.'
> возвращает не саму функцию, а специальное значение «ссылочного типа»,
> называемого Reference Type.

Reference Type - это внутренний тип. Под капотом он выглядит вроде этого:

```js
(base, name, strict)
// (user, "hi", true)
```

где:

- `base` - это объект
- `name` - это имя свойства объекта
- `strict` - это режим исполнения (`use strict`)

Результатом доступа к `user.hi` является не функция, а значение ссылочного типа.

При любой другой операции, значение ссылочного типа заменяется на обычную функцию.

Таким образом, значение `this` передаётся правильно, только если функция вызывается
напрямую с использованием синтаксиса точки `obj.method()` или квадратных скобок
`obj['method']()` (они делают то же самое).
